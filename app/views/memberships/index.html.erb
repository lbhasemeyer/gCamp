<strong><p id="notice" class="text-center"><%= notice %></p></strong>


  <h1><%= @project.name %>: Manage Members</h1>

  <ol class="breadcrumb task_index">
    <li><%= link_to "Projects", projects_path %></li>
    <li><%= link_to @project.name, project_path(@project) %></li>
    <li class="active">Memberships</li>
  </ol>

  <div class="col-sm-11 membership-errors">
    <%= render "shared/errors", error_for: @membership %>
  </div>

  <div class="well form-inline col-sm-6">
    <div class="form-group">
      <%= form_for [@project, @membership] do |f| %>
        <%= f.label :user_id %>
        <%= f.collection_select :user_id, User.all, :id, :full_name,
                {include_blank: "Please select a user..."}, {class: "form-control"} %>
        <%= f.select :title, [["Member"], ["Owner"]],
                {include_blank: false}, {class: "dropdown-toggle form-control"} %>
        <%= f.submit "Add New Member", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>

  <table class="table">
    <tbody>
        <% @project.users.each do |user| %>
          <% user.memberships.each do |membership| %>
            <%= form_for [@project, membership] do |f| %>
              <tr>
                 <td><%= link_to user.full_name, user_path(user)  %></td>
                 <td><%= f.select :title, [["Member"], ["Owner"]],
                        {include_blank: false}, {class: "dropdown-toggle form-control"} %></td>
                 <td><%= f.submit "Update", class: "btn btn-primary" %></td>
                 <td><%= link_to "", project_membership_path(@project, membership), method: :delete, data:
                        { confirm: 'Are you sure?' }, class: "glyphicon glyphicon-remove" %></td>
              </tr>
            <% end %>
          <% end %>
        <% end %>
    </tbody>
  </table>
